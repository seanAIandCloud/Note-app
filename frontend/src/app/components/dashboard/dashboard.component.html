<div class="dashboard-container">
  <!-- Nav Bar -->
  <header class="navbar">
    <div class="logo">GameNotes</div>

    <div class="nav-actions">
      <button mat-button routerLink="/about">About</button>
      <button mat-button routerLink="/profile">Profile</button>
    </div>
  </header>

  <!-- Notes area -->
  <div class="content">
    <aside class="sidebar">
      <button mat-button (click)="applyFilter('all')">All Notes</button>
      <button mat-button (click)="applyFilter('pinned')">Pinned</button>
      <button mat-button (click)="applyFilter('archived')">Archived</button>
    </aside>

    <main class="notes-area">
      <!-- New Note button -->
      <div class="new-note-wrapper">
        <button mat-raised-button (click)="openNewNoteForm()">
          + New Note
        </button>
      </div>

      <div class="your-notes">
        <h2>Your Notes</h2>
      </div>

      <div *ngIf="notes.length === 0">
        <p>No notes yet.</p>
      </div>

      <div class="note-cards-container">
        <div
          class="note-card"
          *ngFor="let note of notes"
          [ngClass]="note.priority"
        >
          <mat-icon
            *ngIf="note.isPinned"
            class="pinned-icon"
            aria-label="Pinned Note"
            >push_pin</mat-icon
          >
          <mat-icon
            *ngIf="note.isArchived"
            class="archived-icon"
            aria-label="Archived Note"
            >archive</mat-icon
          >

          <h3>{{ note.title }}</h3>
          <p>{{ note.content }}</p>

          <div class="note-actions-bottom">
            <button
              mat-icon-button
              (click)="togglePin(note)"
              matTooltip="Pin/Unpin"
            >
              <mat-icon>{{
                note.isPinned ? "push_pin" : "push_pin_outline"
              }}</mat-icon>
            </button>

            <button
              mat-icon-button
              (click)="toggleArchive(note)"
              matTooltip="Archive/Unarchive"
            >
              <mat-icon>{{
                note.isArchived ? "unarchive" : "archive"
              }}</mat-icon>
            </button>

            <button
              mat-icon-button
              (click)="editNote(note)"
              matTooltip="Edit Note"
            >
              <mat-icon>edit</mat-icon>
            </button>

            <button
              mat-icon-button
              (click)="deleteNote(note.id)"
              matTooltip="Delete Note"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- New Note Modal -->
  <div class="modal-backdrop" *ngIf="showNewNoteForm">
    <div class="modal">
      <h2>New Note</h2>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Title</mat-label>
        <input matInput [(ngModel)]="newNote.title" />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Content</mat-label>
        <textarea matInput rows="4" [(ngModel)]="newNote.content"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Priority</mat-label>
        <mat-select [(ngModel)]="newNote.priority">
          <mat-option value="urgent">Urgent</mat-option>
          <mat-option value="normal">Normal</mat-option>
          <mat-option value="done">Done</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="modal-buttons">
        <button mat-raised-button color="primary" (click)="saveNote()">
          {{ editingNote ? "Update" : "Save" }}
        </button>
        <button mat-button (click)="closeNewNoteForm()">Cancel</button>
      </div>
    </div>
  </div>
</div>
